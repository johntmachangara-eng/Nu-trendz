<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nu-Trendz | Booking</title>

  <!-- Styles -->
  <link rel="stylesheet" href="footer.css">
  <link rel="stylesheet" href="booking.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body>
  <main id="booking-page">
    <!-- Header + steps -->
    <section class="booking-header">
      <h1>Book <span>Your Appointment</span></h1>
      <p>Follow the steps below to choose your services, time and details.</p>

      <section class="steps-strip" aria-label="Booking steps">
        <div class="step step--active" data-step="1" role="button" tabindex="0">
          <span>1</span><p>Services &amp; stylists</p>
        </div>
        <div class="step" data-step="2" role="button" tabindex="0">
          <span>2</span><p>Date &amp; time</p>
        </div>
        <div class="step" data-step="3" role="button" tabindex="0">
          <span>3</span><p>Your details</p>
        </div>
      </section>
    </section>

    <!-- ========== STEP 1: SUMMARY + STYLISTS ========== -->
    <section class="booking-step" data-step-panel="1">
      <div class="booking-layout">
        <!-- Left: services summary -->
        <section class="booking-card">
          <h2>Your services</h2>
          <div id="servicesSummary"></div>

          <div class="booking-total-row">
            <p>
              <span id="summaryTotalLabel">Estimated total:</span>
              <span id="summaryTotal">£0</span>
            </p>
          </div>

          <a href="services.html" class="back-link">← Change services</a>
        </section>

        <!-- Right: stylist options -->
        <section class="booking-card">
          <h2>Choose stylists</h2>

          <p class="booking-form-intro">
            You can use one stylist for everything or pick a stylist for each service.
          </p>

          <div class="stylist-mode">
            <label>
              <input type="radio" name="stylistMode" value="one" checked>
              Use <strong>one stylist</strong> for all services
            </label>
            <label>
              <input type="radio" name="stylistMode" value="per-service">
              Choose a stylist <strong>for each service</strong>
            </label>
          </div>

          <div id="stylistGlobalSelectWrapper" class="form-group">
            <label for="stylistAll">Stylist for all services</label>
            <select id="stylistAll"></select>
          </div>

          <div id="stylistPerServiceWrapper" class="per-service-stylists hidden">
            <!-- per-service dropdowns will be injected here -->
          </div>

          <div class="step-buttons">
            <button type="button" id="toStep2" class="primary-btn">
              Next: Choose date &amp; time
            </button>
          </div>
          <p id="step1Error" class="step-error" aria-live="polite"></p>
        </section>
      </div>
    </section>

    <!-- ========== STEP 2: DATE & TIME ========== -->
    <section class="booking-step hidden" data-step-panel="2">
      <div class="booking-layout single-column">
        <section class="booking-card">
          <h2>Date &amp; time</h2>
          <p class="booking-form-intro">
            Nu-Trendz opening hours: <strong>Monday – Saturday, 09:00 to 18:00</strong>.
            Sundays are closed.
          </p>

          <div class="form-group">
            <label for="bookingDate">Choose a day</label>
            <input type="date" id="bookingDate" />
            <small class="note">
              Past days and Sundays are not available for booking.
            </small>
          </div>

          <div class="form-group">
            <label>Available times</label>
            <div id="timeSlots" class="time-slots">
              <!-- time buttons injected here -->
            </div>
            <p id="dateStatus" class="step-error" aria-live="polite"></p>
          </div>

          <div class="step-buttons">
            <button type="button" class="secondary-btn" id="backTo1">← Back</button>
            <button type="button" class="primary-btn" id="toStep3">
              Next: Your details
            </button>
          </div>
        </section>
      </div>
    </section>

    <!-- ========== STEP 3: DETAILS & CONFIRM ========== -->
    <section class="booking-step hidden" data-step-panel="3">
      <div class="booking-layout">
        <section class="booking-card">
          <h2>Your details</h2>

          <form id="detailsForm">
            <div class="form-row">
              <div class="form-group">
                <label for="fullName">Full name</label>
                <input type="text" id="fullName" required />
              </div>
              <div class="form-group">
                <label for="email">Email address</label>
                <input type="email" id="email" required />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="phone">Phone number</label>
                <input type="tel" id="phone" required />
              </div>
            </div>

            <div class="form-group">
              <label for="notes">Extra notes (optional)</label>
              <textarea id="notes" rows="4"
                placeholder="Hair length, past styles, allergies, anything we should know."></textarea>
            </div>

            <h3 class="subheading">How would you like to pay?</h3>
            <div class="payment-options">
              <label>
                <input type="radio" name="paymentMethod" value="pay_at_venue" checked>
                Pay at the salon
              </label>
              <label>
                <input type="radio" name="paymentMethod" value="pay_later">
                Decide payment later (we will contact you)
              </label>
            </div>

            <p class="small-warning">
              This page <strong>only saves your booking</strong> and payment choice.
              Card payments are handled separately by the salon.
            </p>

            <div class="step-buttons">
              <button type="button" class="secondary-btn" id="backTo2">← Back</button>
              <button type="submit" class="primary-btn" id="confirmBooking">
                Confirm my booking
              </button>
            </div>
            <p id="finalStatus" class="step-status" aria-live="polite" role="status"></p>
          </form>

          <div id="thankYou" class="thankyou hidden">
            <h2>Your appointment request has been sent ✅</h2>
            <p>
              Thank you. Your booking is now saved in our system.
              We will contact you by phone, text or email to confirm the time
              and talk about payment if needed.
            </p>
            <ul>
              <li><strong>Step 1:</strong> Check your email for a booking summary.</li>
              <li><strong>Step 2:</strong> Wait for a message or call from Nu-Trendz.</li>
              <li><strong>Step 3:</strong> Arrive a little early for your appointment.</li>
            </ul>
            <a href="index.html" class="back-link">← Back to home</a>
          </div>
        </section>

        <section class="booking-card">
          <h2>Summary</h2>
          <div id="finalSummary"></div>
          <div class="booking-total-row">
            <p>
              <span id="finalTotalLabel">Estimated total:</span>
              <span id="finalTotal">£0</span>
            </p>
          </div>
          <p class="small-note">
            Times and availability are checked against existing bookings in our system.
          </p>
        </section>
      </div>
    </section>
  </main>

  <!-- Simple footer for brand only -->
  <footer class="site-footer">
    <div class="footer-bottom">
      <p>&copy; 2025 NU-TRENDZ. All Rights Reserved.</p>
    </div>
  </footer>

  <script type="module" src="booking.js"></script>
</body>
</html>
